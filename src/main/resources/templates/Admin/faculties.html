<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Faculties</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
</head>
<body>
<div class="container">
<div>
    <h5>
    <p th:if="${order.equals('asc')}" th:text="#{faculties.sort} + ' ↑'"></p>
    <p th:if="${order.equals('desc')}" th:text="#{faculties.sort} + ' ↓'"></p>
        <h5>
    <ul  >
        <li>
            <a th:if="${order.equals('asc')}"
               th:href="@{/admin/faculties?sort=name&order=desc}">
                <label>
                    <input style="color:green"
                           th:type="button"
                           th:value="#{faculties.sortByName}">
                </label>
            </a>
            <a th:if="${order.equals('desc')}"
               th:href="@{/admin/faculties?sort=name&order=asc}">
                <label>
                    <input style="color:blue"
                           th:type="button"
                           th:value="#{faculties.sortByName}">
                </label>
            </a>
        </li>
        <li>
            <a th:if="${order.equals('asc')}"
               th:href="@{/admin/faculties?sort=generalPlaces&order=desc}">
                <label>
                    <input style="color:green"
                           th:type="button"
                           th:value="#{faculties.sortByGeneralPlaces}">
                </label>
            </a>
            <a th:if="${order.equals('desc')}"
               th:href="@{/admin/faculties?sort=generalPlaces&order=asc}">
                <label>
                    <input style="color:blue"
                           th:type="button"
                           th:value="#{faculties.sortByGeneralPlaces}">
                </label>
            </a>
        </li>
        <li>
            <a th:if="${order.equals('asc')}"
               th:href="@{/admin/faculties?sort=budgetPlaces&order=desc}">
                <label>
                    <input style="color:green"
                           th:type="button"
                           th:value="#{faculties.sortByBudgetPlaces}">
                </label>

            </a>

            <a th:if="${order.equals('desc')}"
               th:href="@{/admin/faculties?sort=budgetPlaces&order=asc}">
                <label>
                    <input style="color:blue"
                           th:type="button"
                           th:value="#{faculties.sortByBudgetPlaces}">
                </label>
            </a>
        </li>
    </ul>
    <hr>
</div>
<div class="row row-cols-4 row-cols-md-3 g-4">
    <tr th:each="faculty : ${faculties}">
        <div class="card h-100">
            <h5>
                <p th:text="#{faculties.name} +': ' + ${faculty.getName}"></p>
                <p th:text="#{faculties.budgetPlaces} +': '+ ${faculty.getBudgetPlaces}"></p>
                <p th:text="#{faculties.generalPlaces} +': '+ ${faculty.getGeneralPlaces()}"></p>
                <p th:text="#{faculties.requiredSubjects}+': '"></p>
            </h5>

            <div  th:each="subject : ${faculty.getSubjects()}">
                <h6>
                    <a style="color:green"   th:text="${subject.getNameEN()}+' '">en</a>
                </h6>

            </div>
            <div sec:authorize="hasAuthority('USER')">
                <div th:if="${!faculty.getRecruitment()}">
                    <a th:href="@{'/user/statement?facultyId='+ ${faculty.getId()}}">
                        <input type="button" th:value="'regisrtation'">
                    </a>
                </div>
            </div>
            <div sec:authorize="hasAuthority('ADMIN')">
                <form th:method="DELETE"
                      th:action="@{/admin/faculty/{id}(id=${faculty.getId})} ">
                    <input type="submit" th:value="#{common.delete}">
                </form>
                <form>

                    <a th:href="@{'/admin/updateFaculty?facultyId='+${faculty.getId}}">
                        <input type="button" th:value="#{common.edit}">
                    </a>
                </form>

                <form th:method="PATCH"
                      th:action="@{/admin/recruitment}">
                    <input th:type="hidden"
                           th:name="facultyId"
                           th:value="${faculty.getId()}">
                    <input th:type="hidden"
                           th:name="facultyOpen"
                           th:value="${faculty.getRecruitment()}">
                    <button th:type="submit"
                            th:if="${faculty.getRecruitment()} ">
                        <label>
                            <input style="color:green"
                                   th:type="button"
                                   th:value="#{faculties.open}">
                        </label>
                    </button>

                    <button th:type="submit"
                            th:if="${!faculty.getRecruitment()}">
                        <label>
                            <input style="color:red"
                                   th:type="button"
                                   th:value="#{faculties.close}">
                        </label>
                    </button>
                </form>
            </div>
        </div>
    </tr>
</div>
<h2>

    <a sec:authorize="hasAuthority('ADMIN')"
       th:href="@{/admin/addFaculty}"
       th:text="#{faculties.addFaculty}"></a>
    <br/>

    <a th:href="@{/}" th:text="#{common.back}"></a>
</h2>
</div>
</body>
</html>